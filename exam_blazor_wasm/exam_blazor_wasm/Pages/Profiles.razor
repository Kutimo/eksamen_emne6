@page "/profiles"

<PageTitle>Profiles</PageTitle>

<div class="max-w-6xl mx-auto min-w-4/5 px-4 py-8">
    <div class="mb-8">
        <h1 class="text-4xl font-bold text-primary mb-2">Random Profiles</h1>
        <p class="text-secondary my-4">Discover people from around the world</p>
    </div>

    <ProfileControls OnCountChange="HandleCountChange" OnSearchChange="HandleSearchChange" OnRefresh="LoadUsers" />

    @if (!string.IsNullOrEmpty(_errorMessage))
    {
        <div class="bg-red-600 text-white p-6 rounded-xl mb-8">
            <p class="mb-4">@_errorMessage</p>
            <button class="bg-white text-red-600 px-4 py-2 rounded-lg font-semibold" @onclick="LoadUsers">
                Try Again
            </button>
        </div>
    }

    <div class="grid grid-cols-auto-fit gap-4">
        @if (_isLoading)
        {
            @for (int i = 0; i < _count; i++)
            {
                <UserCardSkeleton />
            }
        }
        else
        {
            @foreach (var user in FilteredUsers)
            {
                <UserCard @key="user.Id" User="user" OnClick="@OpenModal" />
            }
        }
    </div>
</div>

<UserDetailsModal User="@_selectedUser" IsOpen="@_isModalOpen" OnClose="@CloseModal" />

