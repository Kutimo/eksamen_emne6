@page "/profiles"
@inject IUserService UserService

@if (_isLoading)
{
    @for (int i = 0; i < Count; i++)
    {
        <UserCardSkeleton />
    }
}
else
{
    @foreach (var user in _users)
    {
        <UserCard User="user" />
    }
}

@code {
    private List<User> _users = [];
    private bool _isLoading = true;
    private const int Count = 10;

    protected override async Task OnInitializedAsync()
    {
        await LoadUsers();
    }

    private async Task LoadUsers()
    {
        _isLoading = true;
        _users = await UserService.GetUsersAsync(Count);
        _isLoading = false;
    }
}